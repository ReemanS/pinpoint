(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1635:(e,t,r)=>{Promise.resolve().then(r.bind(r,9195))},3383:()=>{},5485:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,ThemeProvider:()=>s});var a=r(5155),o=r(2115);let n=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)("light"),[l,i]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{let e=localStorage.getItem("theme");"light"===e||"dark"===e?s(e):s(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),i(!0)},[]),(0,o.useEffect)(()=>{if(!l)return;let e=document.documentElement;"dark"===r?e.setAttribute("data-theme","dark"):e.removeAttribute("data-theme"),localStorage.setItem("theme",r)},[r,l]),l)?(0,a.jsx)(n.Provider,{value:{theme:r,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")}},children:t}):null}function l(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9195:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),o=r(2115),n=r(5485),s=r(7856),l=r.n(s);r(3383);var i=r(5704);let c=function(e){let{center:t,zoom:r,onFlyTo:n,onDisplayBoundingBox:s}=e,[l,c]=(0,o.useState)(""),[d,u]=(0,o.useState)([]),[m,h]=(0,o.useState)(!1),[p,g]=(0,o.useState)(!1),x=async e=>{try{let r=i.env.NEXT_PUBLIC_MAPBOX_TOKEN,a=new URLSearchParams({q:e,access_token:r||"",limit:"8",autocomplete:"false",proximity:"".concat(t[0],",").concat(t[1]),types:"country,region,postcode,district,place,locality,neighborhood"}),o="https://api.mapbox.com/search/geocode/v6/forward?".concat(a.toString()),n=await fetch(o);if(!n.ok)throw Error("Search failed");let s=await n.json();if(s.features&&Array.isArray(s.features)){let e=s.features.map(e=>{var t,r,a;let o=e.properties,n=e.geometry,s=e.id||(null==o?void 0:o.mapbox_id)||"",l=null!=(a=null==o?void 0:o.name)?a:"Unnamed",i=Array.isArray(null==n?void 0:n.coordinates)?[n.coordinates[0],n.coordinates[1]]:[(null==o||null==(t=o.coordinates)?void 0:t.longitude)||0,(null==o||null==(r=o.coordinates)?void 0:r.latitude)||0],c=null==o?void 0:o.place_formatted,d=null==o?void 0:o.full_address,u=null==o?void 0:o.feature_type,m=null==o?void 0:o.bbox;return{id:s,name:l,coordinates:i,place_formatted:c,full_address:d,bbox:m,feature_type:u}});u(e),e.length>0&&g(!0)}}catch(e){console.error("Search error:",e),u([])}finally{h(!1)}};return(0,a.jsxs)("div",{className:"map-actions-container",children:[(0,a.jsxs)("div",{className:"map-topbar",children:[(0,a.jsxs)("div",{className:"map-coords",children:[(0,a.jsxs)("div",{children:["Longitude: ",t[0].toFixed(4)," | Latitude: ",t[1].toFixed(4)]}),(0,a.jsxs)("div",{children:["Zoom: ",r.toFixed(2)]})]}),(0,a.jsx)("button",{onClick:()=>n([-157.3637,1.9827],13),className:"map-reset-button map-reset-button--small",children:"Reset"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.length>=3&&(h(!0),x(l))},className:"map-search-form",children:[(0,a.jsxs)("div",{className:"map-search-container",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>{let t=e.target.value;c(t),t.length<3&&(u([]),g(!1))},placeholder:"Search for a location...",className:"map-search-input"}),(0,a.jsx)("button",{type:"submit",className:"map-search-button",disabled:m,children:"Search"})]}),p&&d.length>0&&(0,a.jsx)("div",{className:"map-search-results",children:d.map(e=>(0,a.jsxs)("div",{className:"map-search-result-item",onClick:()=>(e=>{let[t,r]=e.coordinates;e.bbox?(s(e.bbox),n([t,r],15)):(s(null),n([t,r],14)),g(!1),c(e.name)})(e),children:[(0,a.jsx)("div",{className:"map-result-name",children:e.name}),(0,a.jsx)("div",{className:"map-result-address",children:e.place_formatted||e.full_address})]},e.id))})]})]})};var d=r(5704);let u=[-157.3637,1.9827],m=function(){let e=(0,o.useRef)(null),t=(0,o.useRef)(null),[r,s]=(0,o.useState)(null),{theme:i}=(0,n.D)(),[m,h]=(0,o.useState)(u),[p,g]=(0,o.useState)(13);return(0,o.useEffect)(()=>(l().accessToken=d.env.NEXT_PUBLIC_MAPBOX_TOKEN||"",t.current&&(e.current=new(l()).Map({container:t.current,style:"mapbox://styles/mapbox/standard",config:{basemap:{lightPreset:"dark"===i?"night":"day"}},center:u,zoom:13}),e.current.on("move",()=>{let t=e.current.getCenter(),r=e.current.getZoom();h([t.lng,t.lat]),g(r)})),()=>{e.current&&e.current.remove()}),[i]),(0,o.useEffect)(()=>{e.current&&e.current.setConfigProperty("basemap","lightPreset","dark"===i?"night":"day")},[i]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{center:m,zoom:p,onFlyTo:(t,r)=>{e.current&&e.current.flyTo({center:t,zoom:r||p})},onDisplayBoundingBox:t=>{let a=e.current;if(a&&(r&&(a.getLayer("bbox-layer")&&a.removeLayer("bbox-layer"),a.getSource(r)&&a.removeSource(r),s(null)),t)){let e="bbox-source-".concat(Date.now());a.addSource(e,{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],[t[0],t[1]]]]},properties:{}}}),a.addLayer({id:"bbox-layer",type:"line",source:e,layout:{},paint:{"line-color":"#0080ff","line-width":2}}),s(e),a.fitBounds([[t[0],t[1]],[t[2],t[3]]],{padding:50})}}}),(0,a.jsx)("div",{id:"map-container",ref:t})]})};function h(){let{theme:e,toggleTheme:t}=(0,n.D)();return(0,a.jsx)("button",{onClick:t,className:"fixed top-4 right-4 z-50 p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg","aria-label":"Switch to ".concat("light"===e?"dark":"light"," mode"),children:"light"===e?(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})}function p(){return(0,a.jsxs)("div",{className:"min-h-screen bg-background dark:bg-background-dark text-text dark:text-text-dark font-manrope p-4",children:[(0,a.jsx)(h,{}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Pinpoint"}),(0,a.jsx)(m,{})]})}}},e=>{e.O(0,[896,240,441,255,358],()=>e(e.s=1635)),_N_E=e.O()}]);